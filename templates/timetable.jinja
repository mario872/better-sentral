<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{url_for('static',filename='css/output.css')}}" rel="stylesheet">
    {% include 'partials/header.jinja' with context %}
</head>
<body>
    <!-- Start of timetable.jinja -->
  <header class="bg-white shadow">
    <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
      <h1 class="text-3xl font-bold tracking-tight text-gray-900">Timetable</h1>
    </div>
  </header>

  <table class="m-12 p-2 table-auto border-2 border-blue-600" id="calendar">
    <tr>
      <th class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">Week A</th>
      {% for day in range(5) %}
        <th class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">{{ data['timetable'][day]['date'].split(' ')[:3]|join(' ') }}</th>
      {% endfor%}
    </tr>

    {% set day_num = namespace(value=0) %}
    {% set period_num = namespace(value=1) %}
    {% for x in range(data['timetable'][0]['periods']|length) %}
      {% if data['timetable'][:5][day_num.value]['periods'][x]['full_name'] != None %}
        <tr>
          <th class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">{{ period_num.value }}</th>
          {% for y in range(5) %}
            {% set day_num.value = y %}
            <td class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">{{ data['timetable'][:5][day_num.value]['periods'][x]['full_name'] }}</td>
          {% endfor %}
        </tr>
        {% set period_num.value = period_num.value + 1%}
      {% endif %}
    {% endfor %}

    <tr>
      <th class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">Week B</th>
      {% for day in range(5, 10) %}
        <th class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">{{ data['timetable'][day]['date'].split(' ')[:3]|join(' ') }}</th>
      {% endfor%}
    </tr>

    {% set day_num = namespace(value=0) %}
    {% set period_num = namespace(value=1) %}
    {% for x in range(data['timetable'][6]['periods']|length) %}
      {% if data['timetable'][:5][day_num.value]['periods'][x]['full_name'] != None %}
        <tr>
          <th class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">{{ period_num.value }}</th>
          {% for y in range(5) %}
            {% set day_num.value = y %}
            <td class="m-6 p-2 border-2 border-blue-600 text-center border-collapse">{{ data['timetable'][5:10][day_num.value]['periods'][x]['full_name'] }}</td>
          {% endfor %}
        </tr>
        {% set period_num.value = period_num.value + 1%}
      {% endif %}
    {% endfor %}

  </table>

    <!-- End of timetable.jinja -->
{% include 'partials/footer.jinja' with context %}

</body>
</html>